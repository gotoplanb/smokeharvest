# SmokeHarvest: Initial Crawl Prompt

Use this prompt with Claude Code + Playwright MCP to generate your baseline tests.

---

## Prompt

```
I need you to generate Playwright end-to-end tests by crawling a live website.

Read the configuration file at [PATH_TO_CONFIG]/smokeharvest.config.yaml

For each critical path defined in the config:

1. Use the Playwright MCP to navigate to the target URL
2. Execute each step in the critical path:
   - For "navigate" actions: go to the specified URL
   - For "fill_form" actions: locate and fill each field
   - For "submit" actions: click the submit button
   - For "verify" actions: assert the expected content is present
3. Record the exact selectors that worked
4. Note any assertions that validate success

Then generate a Playwright test file that:
- Is written in TypeScript
- Uses @playwright/test
- Has clear, readable test names
- Uses the most stable selectors available (prefer data-testid, fall back to name attributes, then CSS)
- Includes comments explaining each step
- Would pass if run against the site right now

Save the generated test(s) to the output directory specified in the config.

Add a header comment to each generated file:
// Generated by SmokeHarvest - DO NOT EDIT MANUALLY
// Baseline captured: [TIMESTAMP]
// Config: [CONFIG_PATH]
```

---

## Usage

```bash
# Replace [PATH_TO_CONFIG] with your actual config location
claude "Read the prompt at templates/prompts/initial-crawl.md and execute it against examples/httpbin/"
```

## What Happens

1. Claude reads your `smokeharvest.config.yaml`
2. Playwright MCP opens a browser and executes the critical path
3. Claude observes what selectors work and what the page looks like
4. Claude generates idiomatic Playwright test code
5. Tests are saved to your specified output directory

## First Run Notes

- The first run creates your **baseline** - this is "what the app does right now"
- Commit these generated tests to your repo
- Subsequent runs will diff against this baseline
